<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 2.6 | TypeScript Handbook（中文版）</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="《TypeScript Handbook》（中文版）TypeScript使用手册">
    <link rel="preload" href="/typescript/assets/css/0.styles.b79b352c.css" as="style"><link rel="preload" href="/typescript/assets/js/app.0e06d88a.js" as="script"><link rel="preload" href="/typescript/assets/js/2.2c62d7e6.js" as="script"><link rel="preload" href="/typescript/assets/js/99.b7f86839.js" as="script"><link rel="prefetch" href="/typescript/assets/js/10.d6e8d454.js"><link rel="prefetch" href="/typescript/assets/js/100.329f4650.js"><link rel="prefetch" href="/typescript/assets/js/101.2ac7a921.js"><link rel="prefetch" href="/typescript/assets/js/102.09822bc3.js"><link rel="prefetch" href="/typescript/assets/js/103.71daab4d.js"><link rel="prefetch" href="/typescript/assets/js/104.3ebe007a.js"><link rel="prefetch" href="/typescript/assets/js/105.86676a1f.js"><link rel="prefetch" href="/typescript/assets/js/106.52689b48.js"><link rel="prefetch" href="/typescript/assets/js/107.be09c369.js"><link rel="prefetch" href="/typescript/assets/js/108.630af0de.js"><link rel="prefetch" href="/typescript/assets/js/109.00f4b774.js"><link rel="prefetch" href="/typescript/assets/js/11.627db9ad.js"><link rel="prefetch" href="/typescript/assets/js/110.d3291ae0.js"><link rel="prefetch" href="/typescript/assets/js/111.1e5fa25d.js"><link rel="prefetch" href="/typescript/assets/js/112.6bc6525b.js"><link rel="prefetch" href="/typescript/assets/js/113.44ce700d.js"><link rel="prefetch" href="/typescript/assets/js/114.ecd730c9.js"><link rel="prefetch" href="/typescript/assets/js/115.ecd4d4b4.js"><link rel="prefetch" href="/typescript/assets/js/116.4025e3f8.js"><link rel="prefetch" href="/typescript/assets/js/117.4c77c608.js"><link rel="prefetch" href="/typescript/assets/js/118.df8614a5.js"><link rel="prefetch" href="/typescript/assets/js/119.a63268d6.js"><link rel="prefetch" href="/typescript/assets/js/12.8986ec8b.js"><link rel="prefetch" href="/typescript/assets/js/120.aaab5378.js"><link rel="prefetch" href="/typescript/assets/js/121.7e1cfd4e.js"><link rel="prefetch" href="/typescript/assets/js/122.749c0380.js"><link rel="prefetch" href="/typescript/assets/js/123.d233ea5d.js"><link rel="prefetch" href="/typescript/assets/js/124.6623e08c.js"><link rel="prefetch" href="/typescript/assets/js/125.a3177cd8.js"><link rel="prefetch" href="/typescript/assets/js/126.db6b0b70.js"><link rel="prefetch" href="/typescript/assets/js/127.558cd032.js"><link rel="prefetch" href="/typescript/assets/js/128.41834463.js"><link rel="prefetch" href="/typescript/assets/js/129.7506d3ad.js"><link rel="prefetch" href="/typescript/assets/js/13.1ca2ea79.js"><link rel="prefetch" href="/typescript/assets/js/130.30275c7f.js"><link rel="prefetch" href="/typescript/assets/js/131.dbb79c24.js"><link rel="prefetch" href="/typescript/assets/js/132.8e278c87.js"><link rel="prefetch" href="/typescript/assets/js/133.ea147999.js"><link rel="prefetch" href="/typescript/assets/js/134.8915eb1c.js"><link rel="prefetch" href="/typescript/assets/js/135.b27a24cb.js"><link rel="prefetch" href="/typescript/assets/js/136.ef81f91c.js"><link rel="prefetch" href="/typescript/assets/js/137.036a2055.js"><link rel="prefetch" href="/typescript/assets/js/138.98675367.js"><link rel="prefetch" href="/typescript/assets/js/14.37c7f492.js"><link rel="prefetch" href="/typescript/assets/js/15.38f4f28c.js"><link rel="prefetch" href="/typescript/assets/js/16.a64c264e.js"><link rel="prefetch" href="/typescript/assets/js/17.91d8ea8f.js"><link rel="prefetch" href="/typescript/assets/js/18.51ac87b7.js"><link rel="prefetch" href="/typescript/assets/js/19.91dbdd1e.js"><link rel="prefetch" href="/typescript/assets/js/20.6d2e4055.js"><link rel="prefetch" href="/typescript/assets/js/21.9682215b.js"><link rel="prefetch" href="/typescript/assets/js/22.fd522303.js"><link rel="prefetch" href="/typescript/assets/js/23.e7049527.js"><link rel="prefetch" href="/typescript/assets/js/24.05f4c52d.js"><link rel="prefetch" href="/typescript/assets/js/25.eb553563.js"><link rel="prefetch" href="/typescript/assets/js/26.752cb5d4.js"><link rel="prefetch" href="/typescript/assets/js/27.d864004e.js"><link rel="prefetch" href="/typescript/assets/js/28.cbda47ca.js"><link rel="prefetch" href="/typescript/assets/js/29.84ea3529.js"><link rel="prefetch" href="/typescript/assets/js/3.8bda1f40.js"><link rel="prefetch" href="/typescript/assets/js/30.7afc7e45.js"><link rel="prefetch" href="/typescript/assets/js/31.dd922087.js"><link rel="prefetch" href="/typescript/assets/js/32.1d7d8ad3.js"><link rel="prefetch" href="/typescript/assets/js/33.989f1a5d.js"><link rel="prefetch" href="/typescript/assets/js/34.636c7746.js"><link rel="prefetch" href="/typescript/assets/js/35.4a3a33da.js"><link rel="prefetch" href="/typescript/assets/js/36.261ae21c.js"><link rel="prefetch" href="/typescript/assets/js/37.1a0b0b21.js"><link rel="prefetch" href="/typescript/assets/js/38.a94e2afa.js"><link rel="prefetch" href="/typescript/assets/js/39.63df6ee0.js"><link rel="prefetch" href="/typescript/assets/js/4.4c9829e0.js"><link rel="prefetch" href="/typescript/assets/js/40.b3da223e.js"><link rel="prefetch" href="/typescript/assets/js/41.ffb1bfe2.js"><link rel="prefetch" href="/typescript/assets/js/42.2fb4202a.js"><link rel="prefetch" href="/typescript/assets/js/43.81f36f39.js"><link rel="prefetch" href="/typescript/assets/js/44.0cc83589.js"><link rel="prefetch" href="/typescript/assets/js/45.896194f5.js"><link rel="prefetch" href="/typescript/assets/js/46.6ebccb0e.js"><link rel="prefetch" href="/typescript/assets/js/47.02728ef6.js"><link rel="prefetch" href="/typescript/assets/js/48.a87676e7.js"><link rel="prefetch" href="/typescript/assets/js/49.7bb9cd68.js"><link rel="prefetch" href="/typescript/assets/js/5.78374d20.js"><link rel="prefetch" href="/typescript/assets/js/50.2791a9aa.js"><link rel="prefetch" href="/typescript/assets/js/51.4e54a96f.js"><link rel="prefetch" href="/typescript/assets/js/52.2fa6dca5.js"><link rel="prefetch" href="/typescript/assets/js/53.0fb7d1cf.js"><link rel="prefetch" href="/typescript/assets/js/54.577fd1a9.js"><link rel="prefetch" href="/typescript/assets/js/55.6919b9ac.js"><link rel="prefetch" href="/typescript/assets/js/56.14b87581.js"><link rel="prefetch" href="/typescript/assets/js/57.f50d71ab.js"><link rel="prefetch" href="/typescript/assets/js/58.2569019f.js"><link rel="prefetch" href="/typescript/assets/js/59.b8f7929d.js"><link rel="prefetch" href="/typescript/assets/js/6.71a548bb.js"><link rel="prefetch" href="/typescript/assets/js/60.95ac14ec.js"><link rel="prefetch" href="/typescript/assets/js/61.2d80fd78.js"><link rel="prefetch" href="/typescript/assets/js/62.0b89c246.js"><link rel="prefetch" href="/typescript/assets/js/63.a1c284f7.js"><link rel="prefetch" href="/typescript/assets/js/64.2b780694.js"><link rel="prefetch" href="/typescript/assets/js/65.ee4cb48e.js"><link rel="prefetch" href="/typescript/assets/js/66.1ef33466.js"><link rel="prefetch" href="/typescript/assets/js/67.efa35d32.js"><link rel="prefetch" href="/typescript/assets/js/68.1bf6b7b8.js"><link rel="prefetch" href="/typescript/assets/js/69.0c15538d.js"><link rel="prefetch" href="/typescript/assets/js/7.8fb4c5d3.js"><link rel="prefetch" href="/typescript/assets/js/70.0a3b2c0b.js"><link rel="prefetch" href="/typescript/assets/js/71.37e8ddb8.js"><link rel="prefetch" href="/typescript/assets/js/72.1ce373d6.js"><link rel="prefetch" href="/typescript/assets/js/73.5019730b.js"><link rel="prefetch" href="/typescript/assets/js/74.a7460721.js"><link rel="prefetch" href="/typescript/assets/js/75.f1032ef6.js"><link rel="prefetch" href="/typescript/assets/js/76.dfb1027c.js"><link rel="prefetch" href="/typescript/assets/js/77.611683ad.js"><link rel="prefetch" href="/typescript/assets/js/78.dac04a6d.js"><link rel="prefetch" href="/typescript/assets/js/79.7f256ea5.js"><link rel="prefetch" href="/typescript/assets/js/8.5ab30204.js"><link rel="prefetch" href="/typescript/assets/js/80.23d2e7fd.js"><link rel="prefetch" href="/typescript/assets/js/81.cbbd67b9.js"><link rel="prefetch" href="/typescript/assets/js/82.1a05152f.js"><link rel="prefetch" href="/typescript/assets/js/83.9de9f221.js"><link rel="prefetch" href="/typescript/assets/js/84.7446dedf.js"><link rel="prefetch" href="/typescript/assets/js/85.3e267e83.js"><link rel="prefetch" href="/typescript/assets/js/86.1c8b02c0.js"><link rel="prefetch" href="/typescript/assets/js/87.bfe359fd.js"><link rel="prefetch" href="/typescript/assets/js/88.8f8614c1.js"><link rel="prefetch" href="/typescript/assets/js/89.95dcadb3.js"><link rel="prefetch" href="/typescript/assets/js/9.678ed93c.js"><link rel="prefetch" href="/typescript/assets/js/90.f4bf22c3.js"><link rel="prefetch" href="/typescript/assets/js/91.08426091.js"><link rel="prefetch" href="/typescript/assets/js/92.2f541757.js"><link rel="prefetch" href="/typescript/assets/js/93.affbb7e4.js"><link rel="prefetch" href="/typescript/assets/js/94.6d95e042.js"><link rel="prefetch" href="/typescript/assets/js/95.eab0c9cd.js"><link rel="prefetch" href="/typescript/assets/js/96.878b7a92.js"><link rel="prefetch" href="/typescript/assets/js/97.bbf57fa2.js"><link rel="prefetch" href="/typescript/assets/js/98.d8fa6bed.js">
    <link rel="stylesheet" href="/typescript/assets/css/0.styles.b79b352c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/typescript/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript Handbook（中文版）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/zhongsp/TypeScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="新增功能" class="dropdown-title"><span class="title">新增功能</span> <span class="arrow down"></span></button> <button type="button" aria-label="新增功能" class="mobile-dropdown-title"><span class="title">新增功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-4.0.html" class="nav-link">
  TypeScript 4.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.9.html" class="nav-link">
  TypeScript 3.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.8.html" class="nav-link">
  TypeScript 3.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.7.html" class="nav-link">
  TypeScript 3.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.6.html" class="nav-link">
  TypeScript 3.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.5.html" class="nav-link">
  TypeScript 3.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.4.html" class="nav-link">
  TypeScript 3.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.3.html" class="nav-link">
  TypeScript 3.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.2.html" class="nav-link">
  TypeScript 3.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.1.html" class="nav-link">
  TypeScript 3.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.0.html" class="nav-link">
  TypeScript 3.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.9.html" class="nav-link">
  TypeScript 2.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.8.html" class="nav-link">
  TypeScript 2.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.7.html" class="nav-link">
  TypeScript 2.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript 2.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.5.html" class="nav-link">
  TypeScript 2.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.4.html" class="nav-link">
  TypeScript 2.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.3.html" class="nav-link">
  TypeScript 2.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.2.html" class="nav-link">
  TypeScript 2.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.1.html" class="nav-link">
  TypeScript 2.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.0.html" class="nav-link">
  TypeScript 2.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.8.html" class="nav-link">
  TypeScript 1.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.7.html" class="nav-link">
  TypeScript 1.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.6.html" class="nav-link">
  TypeScript 1.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.5.html" class="nav-link">
  TypeScript 1.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.4.html" class="nav-link">
  TypeScript 1.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.3.html" class="nav-link">
  TypeScript 1.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.1.html" class="nav-link">
  TypeScript 1.1
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Breaking Changes" class="dropdown-title"><span class="title">Breaking Changes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Breaking Changes" class="mobile-dropdown-title"><span class="title">Breaking Changes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.6.html" class="nav-link">
  TypeScript 3.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.5.html" class="nav-link">
  TypeScript 3.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.4.html" class="nav-link">
  TypeScript 3.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.2.html" class="nav-link">
  TypeScript 3.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.1.html" class="nav-link">
  TypeScript 3.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.0.html" class="nav-link">
  TypeScript 3.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.9.html" class="nav-link">
  TypeScript 2.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.8.html" class="nav-link">
  TypeScript 2.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.7.html" class="nav-link">
  TypeScript 2.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.6.html" class="nav-link">
  TypeScript 2.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.4.html" class="nav-link">
  TypeScript 2.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.3.html" class="nav-link">
  TypeScript 2.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.2.html" class="nav-link">
  TypeScript 2.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.1.html" class="nav-link">
  TypeScript 2.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.0.html" class="nav-link">
  TypeScript 2.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.8.html" class="nav-link">
  TypeScript 1.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.7.html" class="nav-link">
  TypeScript 1.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.6.html" class="nav-link">
  TypeScript 1.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.5.html" class="nav-link">
  TypeScript 1.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.4.html" class="nav-link">
  TypeScript 1.4
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/zhongsp/TypeScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="新增功能" class="dropdown-title"><span class="title">新增功能</span> <span class="arrow down"></span></button> <button type="button" aria-label="新增功能" class="mobile-dropdown-title"><span class="title">新增功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-4.0.html" class="nav-link">
  TypeScript 4.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.9.html" class="nav-link">
  TypeScript 3.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.8.html" class="nav-link">
  TypeScript 3.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.7.html" class="nav-link">
  TypeScript 3.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.6.html" class="nav-link">
  TypeScript 3.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.5.html" class="nav-link">
  TypeScript 3.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.4.html" class="nav-link">
  TypeScript 3.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.3.html" class="nav-link">
  TypeScript 3.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.2.html" class="nav-link">
  TypeScript 3.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.1.html" class="nav-link">
  TypeScript 3.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-3.0.html" class="nav-link">
  TypeScript 3.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.9.html" class="nav-link">
  TypeScript 2.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.8.html" class="nav-link">
  TypeScript 2.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.7.html" class="nav-link">
  TypeScript 2.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript 2.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.5.html" class="nav-link">
  TypeScript 2.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.4.html" class="nav-link">
  TypeScript 2.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.3.html" class="nav-link">
  TypeScript 2.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.2.html" class="nav-link">
  TypeScript 2.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.1.html" class="nav-link">
  TypeScript 2.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-2.0.html" class="nav-link">
  TypeScript 2.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.8.html" class="nav-link">
  TypeScript 1.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.7.html" class="nav-link">
  TypeScript 1.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.6.html" class="nav-link">
  TypeScript 1.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.5.html" class="nav-link">
  TypeScript 1.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.4.html" class="nav-link">
  TypeScript 1.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.3.html" class="nav-link">
  TypeScript 1.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/release-notes/typescript-1.1.html" class="nav-link">
  TypeScript 1.1
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Breaking Changes" class="dropdown-title"><span class="title">Breaking Changes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Breaking Changes" class="mobile-dropdown-title"><span class="title">Breaking Changes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.6.html" class="nav-link">
  TypeScript 3.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.5.html" class="nav-link">
  TypeScript 3.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.4.html" class="nav-link">
  TypeScript 3.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.2.html" class="nav-link">
  TypeScript 3.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.1.html" class="nav-link">
  TypeScript 3.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-3.0.html" class="nav-link">
  TypeScript 3.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.9.html" class="nav-link">
  TypeScript 2.9
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.8.html" class="nav-link">
  TypeScript 2.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.7.html" class="nav-link">
  TypeScript 2.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.6.html" class="nav-link">
  TypeScript 2.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.4.html" class="nav-link">
  TypeScript 2.4
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.3.html" class="nav-link">
  TypeScript 2.3
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.2.html" class="nav-link">
  TypeScript 2.2
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.1.html" class="nav-link">
  TypeScript 2.1
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-2.0.html" class="nav-link">
  TypeScript 2.0
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.8.html" class="nav-link">
  TypeScript 1.8
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.7.html" class="nav-link">
  TypeScript 1.7
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.6.html" class="nav-link">
  TypeScript 1.6
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.5.html" class="nav-link">
  TypeScript 1.5
</a></li><li class="dropdown-item"><!----> <a href="/typescript/breaking-changes/typescript-1.4.html" class="nav-link">
  TypeScript 1.4
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/typescript/" aria-current="page" class="sidebar-link">TypeScript</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/typescript/tutorials" class="sidebar-heading clickable"><span>快速上手</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><a href="/typescript/handbook" class="sidebar-heading clickable"><span>手册</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/typescript/handbook/basic-types.html" class="sidebar-link">基础类型</a></li><li><a href="/typescript/handbook/variable-declarations.html" class="sidebar-link">变量声明</a></li><li><a href="/typescript/handbook/interfaces.html" class="sidebar-link">接口</a></li><li><a href="/typescript/handbook/classes.html" class="sidebar-link">类</a></li><li><a href="/typescript/handbook/functions.html" class="sidebar-link">函数</a></li><li><a href="/typescript/handbook/literal-types.html" class="sidebar-link">字面量类型</a></li><li><a href="/typescript/handbook/generics.html" class="sidebar-link">泛型</a></li><li><a href="/typescript/handbook/enums.html" class="sidebar-link">枚举</a></li><li><a href="/typescript/handbook/type-inference.html" class="sidebar-link">类型推论</a></li><li><a href="/typescript/handbook/type-compatibility.html" class="sidebar-link">类型兼容性</a></li><li><a href="/typescript/handbook/advanced-types.html" class="sidebar-link">高级类型</a></li><li><a href="/typescript/handbook/symbols.html" class="sidebar-link">Symbols</a></li><li><a href="/typescript/handbook/iterators-and-generators.html" class="sidebar-link">Iterators 和 Generators</a></li><li><a href="/typescript/handbook/modules.html" class="sidebar-link">模块</a></li><li><a href="/typescript/handbook/namespaces.html" class="sidebar-link">命名空间</a></li><li><a href="/typescript/handbook/namespaces-and-modules.html" class="sidebar-link">命名空间和模块</a></li><li><a href="/typescript/handbook/module-resolution.html" class="sidebar-link">模块解析</a></li><li><a href="/typescript/handbook/declaration-merging.html" class="sidebar-link">声明合并</a></li><li><a href="/typescript/handbook/jsx.html" class="sidebar-link">JSX</a></li><li><a href="/typescript/handbook/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/typescript/handbook/mixins.html" class="sidebar-link">混入</a></li><li><a href="/typescript/handbook/triple-slash-directives.html" class="sidebar-link">三斜线指令</a></li><li><a href="/typescript/handbook/type-checking-javascript-files.html" class="sidebar-link">JavaScript文件里的类型检查</a></li><li><a href="/typescript/handbook/utility-types.html" class="sidebar-link">实用工具类型</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/typescript/introduction" class="sidebar-heading clickable"><span>声明文件</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/typescript/tsconfig.json" class="sidebar-heading clickable"><span>工程配置</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/typescript/wiki" class="sidebar-heading clickable"><span>wiki</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-2-6"><a href="#typescript-2-6" class="header-anchor">#</a> TypeScript 2.6</h1> <h2 id="严格函数类型"><a href="#严格函数类型" class="header-anchor">#</a> 严格函数类型</h2> <p>TypeScript 2.6引入了新的类型检查选项，<code>--strictFunctionTypes</code>。<code>--strictFunctionTypes</code>选项是<code>--strict</code>系列选项之一，也就是说 <code>--strict</code>模式下它默认是启用的。你可以通过在命令行或tsconfig.json中设置<code>--strictFunctionTypes false</code>来单独禁用它。</p> <p><code>--strictFunctionTypes</code>启用时，函数类型参数的检查是_抗变（contravariantly）_而非_双变（bivariantly）_的。关于变体 (variance) 对于函数类型意义的相关背景，请查看<a href="https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance" target="_blank" rel="noopener noreferrer">协变（covariance）和抗变（contravariance）是什么？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>这一更严格的检查应用于除方法或构造函数声明以外的所有函数类型。方法被专门排除在外是为了确保带泛型的类和接口（如<code>Array&lt;T&gt;</code>）总体上仍然保持协变。</p> <p>考虑下面这个 Animal 是 Dog 和 Cat 的父类型的例子：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f1</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f2</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f3</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Cat<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
f1 <span class="token operator">=</span> f2<span class="token punctuation">;</span>  <span class="token comment">// 启用 --strictFunctionTypes 时错误</span>
f2 <span class="token operator">=</span> f1<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
f2 <span class="token operator">=</span> f3<span class="token punctuation">;</span>  <span class="token comment">// 错误</span>
</code></pre></div><p>第一个赋值语句在默认的类型检查模式中是允许的，但是在严格函数类型模式下会被标记错误。 通俗地讲，默认模式允许这么赋值，因为它_可能是_合理的，而严格函数类型模式将它标记为错误，因为它不能_被证明_合理。 任何一种模式中，第三个赋值都是错误的，因为它_永远不_合理。</p> <p>用另一种方式来描述这个例子则是，默认类型检查模式中<code>T</code>在类型<code>(x: T) =&gt; void</code>是_双变的_（也即协变_或_抗变），但在严格函数类型模式中<code>T</code>是_抗变_的。</p> <h3 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Comparer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function-variable function">compare</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// 错误</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
</code></pre></div><p>现在第一个赋值是错误的。更明确地说，<code>Comparer&lt;T&gt;</code>中的<code>T</code>因为仅在函数类型参数的位置被使用，是抗变的。</p> <p>另外，注意尽管有的语言（比如C#和Scala）要求变体标注（variance annotations）（<code>out</code>/<code>in</code> 或 <code>+</code>/<code>-</code>），而由于TypeScript的结构化类型系统，它的变体是由泛型中的类型参数的实际使用自然得出的。</p> <h3 id="注意"><a href="#注意" class="header-anchor">#</a> 注意：</h3> <p>启用<code>--strictFunctionTypes</code>时，如果<code>compare</code>被声明为方法，则第一个赋值依然是被允许的。 更明确的说，<code>Comparer&lt;T&gt;</code>中的<code>T</code>因为仅在方法参数的位置被使用所以是双变的。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Comparer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确，因为双变</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
</code></pre></div><p>TypeScript 2.6 还改进了与抗变位置相关的类型推导：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">combine</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">...</span>funcs<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function-variable function">x</span><span class="token operator">:</span> ）<span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> f <span class="token keyword">of</span> funcs<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">animalFunc</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">dogFunc</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> combined <span class="token operator">=</span> <span class="token function">combine</span><span class="token punctuation">(</span>animalFunc，dogFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (x: Dog) =&gt; void</span>
</code></pre></div><p>这上面所有<code>T</code>的推断都来自抗变的位置，由此我们得出<code>T</code>的_最普遍子类型_。 这与从协变位置推导出的结果恰恰相反，从协变位置我们得出的是_最普遍超类型_。</p> <h2 id="缓存模块中的标签模板对象"><a href="#缓存模块中的标签模板对象" class="header-anchor">#</a> 缓存模块中的标签模板对象</h2> <p>TypeScript 2.6修复了标签字符串模板的输出，以更好地遵循ECMAScript标准。 根据<a href="https://tc39.github.io/ecma262/#sec-gettemplateobject" target="_blank" rel="noopener noreferrer">ECMAScript 标准<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，每一次获取模板标签的值时，应该将_同一个_模板字符串数组对象 (同一个 <code>TemplateStringArray</code>) 作为第一个参数传递。 在 TypeScript 2.6 之前，每一次生成的都是全新的模板对象。 虽然字符串的内容是一样的，这样的输出会影响通过识别字符串来实现缓存失效的库，比如 <a href="https://github.com/PolymerLabs/lit-html/issues/58" target="_blank" rel="noopener noreferrer">lit-html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="例子-2"><a href="#例子-2" class="header-anchor">#</a> 例子</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span>x<span class="token operator">:</span> TemplateStringsArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> id<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello world</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TS 2.6 为 true</span>
</code></pre></div><p>编译后的代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> __makeTemplateObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__makeTemplateObject<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cooked<span class="token punctuation">,</span> raw</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">)</span> <span class="token punctuation">{</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>cooked<span class="token punctuation">,</span> <span class="token string">&quot;raw&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> raw <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> cooked<span class="token punctuation">.</span>raw <span class="token operator">=</span> raw<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cooked<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> _a<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">id</span><span class="token punctuation">(</span>_a <span class="token operator">||</span> <span class="token punctuation">(</span>_a <span class="token operator">=</span> <span class="token function">__makeTemplateObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：这一改变引入了新的工具函数，<code>__makeTemplateObject</code>; 如果你在搭配使用<code>--importHelpers</code>和<a href="https://github.com/Microsoft/tslib" target="_blank" rel="noopener noreferrer"><code>tslib</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，需要更新到 1.8 或更高版本。</p></blockquote> <h2 id="本地化的命令行诊断消息"><a href="#本地化的命令行诊断消息" class="header-anchor">#</a> 本地化的命令行诊断消息</h2> <p>TypeScript 2.6 npm包加入了13种语言的诊断消息本地化版本。 命令行中本地化消息会在使用<code>--locale</code>选项时显示。</p> <h3 id="例子-3"><a href="#例子-3" class="header-anchor">#</a> 例子</h3> <p>俄语显示的错误消息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>c:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span>tsc --v
Version <span class="token number">2.6</span>.1

c:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span>tsc --locale ru --pretty c:<span class="token punctuation">\</span>test<span class="token punctuation">\</span>a.ts

<span class="token punctuation">..</span>/test/a.ts<span class="token punctuation">(</span><span class="token number">1,5</span><span class="token punctuation">)</span>: error TS2322: Тип <span class="token string">&quot;&quot;</span>string<span class="token string">&quot;&quot;</span> не может быть назначен для типа <span class="token string">&quot;number&quot;</span><span class="token builtin class-name">.</span>

<span class="token number">1</span> var x: number <span class="token operator">=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
      ~
</code></pre></div><p>中文显示的帮助信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS C:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span> tsc --v
Version <span class="token number">2.6</span>.1

PS C:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span> tsc --locale zh-cn
版本 <span class="token number">2.6</span>.1
语法：tsc <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>文件 <span class="token punctuation">..</span>.<span class="token punctuation">]</span>

示例：tsc hello.ts
    tsc --outFile file.js file.ts
    tsc @args.txt

选项：
 -h, --help                    打印此消息。
 --all                         显示所有编译器选项。
 -v, --version                 打印编译器的版本。
 --init                        初始化 TypeScript 项目并创建 tsconfig.json 文件。
 -p 文件或目录, --project 文件或目录     编译给定了其配置文件路径或带 <span class="token string">&quot;tsconfig.json&quot;</span> 的文件夹路径的项目。
 --pretty                      使用颜色和上下文风格化错误和消息<span class="token punctuation">(</span>实验<span class="token punctuation">)</span>。
 -w, --watch                   监视输入文件。
 -t 版本, --target 版本            指定 ECMAScript 目标版本：<span class="token string">&quot;ES3&quot;</span><span class="token punctuation">(</span>默认<span class="token punctuation">)</span>、<span class="token string">&quot;ES5&quot;</span>、<span class="token string">&quot;ES2015&quot;</span>、<span class="token string">&quot;ES2016&quot;</span>、<span class="token string">&quot;ES2017&quot;</span> 或 <span class="token string">&quot;ESNEXT&quot;</span>。
 -m 种类, --module 种类            指定模块代码生成：<span class="token string">&quot;none&quot;</span>、<span class="token string">&quot;commonjs&quot;</span>、<span class="token string">&quot;amd&quot;</span>、<span class="token string">&quot;system&quot;</span>、<span class="token string">&quot;umd&quot;</span>、<span class="token string">&quot;es2015&quot;</span>或 <span class="token string">&quot;ESNext&quot;</span>。
 --lib                         指定要在编译中包括的库文件:
                                 <span class="token string">'es5'</span> <span class="token string">'es6'</span> <span class="token string">'es2015'</span> <span class="token string">'es7'</span> <span class="token string">'es2016'</span> <span class="token string">'es2017'</span> <span class="token string">'esnext'</span> <span class="token string">'dom'</span> <span class="token string">'dom.iterable'</span> <span class="token string">'webworker'</span> <span class="token string">'scripthost'</span> <span class="token string">'es2015.core'</span> <span class="token string">'es2015.collection'</span> <span class="token string">'es2015.generator'</span> <span class="token string">'es2015.iterable'</span> <span class="token string">'es2015.promise'</span> <span class="token string">'es2015.proxy'</span> <span class="token string">'es2015.reflect'</span> <span class="token string">'es2015.symbol'</span> <span class="token string">'es2015.symbol.wellknown'</span> <span class="token string">'es2016.array.include'</span> <span class="token string">'es2017.object'</span> <span class="token string">'es2017.sharedmemory'</span> <span class="token string">'es2017.string'</span> <span class="token string">'es2017.intl'</span> <span class="token string">'esnext.asynciterable'</span>
 --allowJs                     允许编译 JavaScript 文件。
 --jsx 种类                      指定 JSX 代码生成：<span class="token string">&quot;preserve&quot;</span>、<span class="token string">&quot;react-native&quot;</span> 或 <span class="token string">&quot;react&quot;</span>。 -d, --declaration             生成相应的 <span class="token string">&quot;.d.ts&quot;</span> 文件。
 --sourceMap                   生成相应的 <span class="token string">&quot;.map&quot;</span> 文件。
 --outFile 文件                  连接输出并将其发出到单个文件。
 --outDir 目录                   将输出结构重定向到目录。
 --removeComments              请勿将注释发出到输出。
 --noEmit                      请勿发出输出。
 --strict                      启用所有严格类型检查选项。
 --noImplicitAny               对具有隐式 <span class="token string">&quot;any&quot;</span> 类型的表达式和声明引发错误。
 --strictNullChecks            启用严格的 NULL 检查。
 --strictFunctionTypes         对函数类型启用严格检查。
 --noImplicitThis              在带隐式<span class="token string">&quot;any&quot;</span> 类型的 <span class="token string">&quot;this&quot;</span> 表达式上引发错误。
 --alwaysStrict                以严格模式进行分析，并为每个源文件发出 <span class="token string">&quot;use strict&quot;</span> 指令。
 --noUnusedLocals              报告未使用的局部变量上的错误。
 --noUnusedParameters          报告未使用的参数上的错误。
 --noImplicitReturns           在函数中的所有代码路径并非都返回值时报告错误。
 --noFallthroughCasesInSwitch  报告 switch 语句中遇到 fallthrough 情况的错误。
 --types                       要包含在编译中类型声明文件。
 @<span class="token operator">&lt;</span>文件<span class="token operator">&gt;</span>                         从文件插入命令行选项和文件。
</code></pre></div><h2 id="通过-ts-ignore-注释隐藏-ts-文件中的错误"><a href="#通过-ts-ignore-注释隐藏-ts-文件中的错误" class="header-anchor">#</a> 通过 '// @ts-ignore' 注释隐藏 .ts 文件中的错误</h2> <p>TypeScript 2.6支持在.ts文件中通过在报错一行上方使用<code>// @ts-ignore</code>来忽略错误。</p> <h3 id="例子-4"><a href="#例子-4" class="header-anchor">#</a> 例子</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// @ts-ignore：无法被执行的代码的错误</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>// @ts-ignore</code>注释会忽略下一行中产生的所有错误。 建议实践中在<code>@ts-ignore</code>之后添加相关提示，解释忽略了什么错误。</p> <p>请注意，这个注释仅会隐藏报错，并且我们建议你_极少_使用这一注释。</p> <h2 id="更快的-tsc-watch"><a href="#更快的-tsc-watch" class="header-anchor">#</a> 更快的 <code>tsc --watch</code></h2> <p>TypeScript 2.6 带来了更快的<code>--watch</code>实现。 新版本优化了使用ES模块的代码的生成和检查。 在一个模块文件中检测到的改变_只_会使改变的模块，以及依赖它的文件被重新生成，而不再是整个项目。 有大量文件的项目应该从这一改变中获益最多。</p> <p>这一新的实现也为tsserver中的监听带来了性能提升。 监听逻辑被完全重写以更快响应改变事件。</p> <h2 id="只写的引用现在会被标记未使用"><a href="#只写的引用现在会被标记未使用" class="header-anchor">#</a> 只写的引用现在会被标记未使用</h2> <p>TypeScript 2.6加入了修正的<code>--noUnusedLocals</code>和<code>--noUnusedParameters</code><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">编译选项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>实现。 只被写但从没有被读的声明现在会被标记未使用。</p> <h3 id="例子-5"><a href="#例子-5" class="header-anchor">#</a> 例子</h3> <p>下面<code>n</code>和<code>m</code>都会被标记为未使用，因为它们的值从未被_读取_。之前 TypeScript 只会检查它们的值是否被_引用_。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外仅被自己内部调用的函数也会被认为是未使用的。</p> <h3 id="例子-6"><a href="#例子-6" class="header-anchor">#</a> 例子</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误：'f' 被声明，但它的值从未被使用</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/10/2020, 1:30:41 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/typescript/assets/js/app.0e06d88a.js" defer></script><script src="/typescript/assets/js/2.2c62d7e6.js" defer></script><script src="/typescript/assets/js/99.b7f86839.js" defer></script>
  </body>
</html>
